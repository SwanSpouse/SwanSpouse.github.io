---
title: app 登录保持
date: 2018-08-20 14:27:34
tags:
  - business-logic
---

#### 简介

在使用App时，一次登录后App如果不主动退出登录，App将会在很长一段时间内保持登录状态。让用户感觉到登录一次就不用每次输入登录密码才能进行登录了。

#### 常见App保持登录的实现方式

前端保存用户和密码
* 利用用户名和密码保持登录是指用户在第一次登录成功时，把用户名和密码保存的本地，下次用户打开App时登录利用保存的用户名和密码在后台自动完成。这种方式需要考虑用户名和密码的安全问题，防止信息被破解。

Token方式
* 在app认证上用的比较普遍，App初始登录时，提交账号和密码数据给服务端，服务端根据定义的的策略生成一个token字符串，token字符串中可以包含用户信息、设备ID等信息以保证用户的唯一性。服务端并对token设置一定的期限。服务端把生成的token字符串传给客户端，客户端保存token字符串，并在接下来的请求中带上这个字符串。相对于在App本地token的安全性更高了。

#### Token方式实现

起主要流程为

* 首先在登录成功、注册成功的时候，后台会根据用户的user_id、device_id 等信息生成用户的session_id(token)，并返回给APP。
* APP在每次请求后台的时候会把session_id带上。
* 后台会对APP请求中的session_id进行校验。校验session_id是否合法、是否过期。如果不合法，则提示让APP重新进行登录。
* 如果session_id合法，则正常处理APP请求。
